# About

This document explains how to edit the map files used by the game.

# Code overview

The levels in the game are generated by a combination of "map fragments" and hand-written code.

A "map fragment" is a `.tmj` map file (found in `Data/Maps/`). These `.tmj` files are files created using Tiled Map Editor v1.8.5.

However, ultimately the levels are created within the C# codebase itself. This C# code is given all map fragments as input. This allows for a variety of techniques -- for instance, we could randomly pick from a list of several map fragments in order to procedurally generate a level.

# How map fragments are represented in the code

The `.tmj` files are not directly used by the game. In other words, you can delete the entire `Data/Maps/` folder and the game will still compile and run.

Instead, there is a pre-processing step that takes the contents of `Data/Maps/` and creates the file `Source code/TuxPlanetSpeedrunAnyPercent/TuxPlanetSpeedrunAnyPercentLibrary/MapData.cs`.

Thus, `MapData.cs` is an auto-generated file and is what the game actually uses to generate the levels.

# How to edit map fragments

You can use the Tiled Map Editor to edit the `.tmj` files. As mentioned above, editing these files will not directly impact the game since the game reads data from `MapData.cs` instead of the `.tmj` files.

After editing the `.tmj` files, run the `GenerateMapCode` utility program in order to re-create the corresponding `MapData.cs` file.

* This utility program is written in C#, so use `csc` to compile the code: `"csc.exe" /out:"./Util/GenerateMapCode.exe" "./Util/GenerateMapCode.cs"`
* After compiling, run the program: `"./Util/GenerateMapCode.exe"`
